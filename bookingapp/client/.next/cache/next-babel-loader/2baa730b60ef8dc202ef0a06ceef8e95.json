{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\NicholasJocius\\\\Documents\\\\GitHub\\\\portfolio-magic\\\\bookingapp\\\\client\\\\components\\\\FirebaseAuthState.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext } from 'react';\nimport { Fragment } from 'react-dom';\nimport firebase from '../firebase';\nimport { Context } from '../context';\n\nvar FirebaseAuthState = function FirebaseAuthState(_ref) {\n  _s();\n\n  var children = _ref.children;\n\n  // update state with dispatch\n  var _useContext = useContext(Context),\n      dispatch = _useContext.dispatch;\n\n  useEffect(function () {\n    // gives logged in users current auth state\n    return firebase.auth().onAuthStateChanged( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!user) {\n                dispatch({\n                  type: 'LOGOUT'\n                });\n              } else {\n                dispatch({\n                  type: 'LOGIN',\n                  payload: user\n                });\n              }\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(FirebaseAuthState, \"o3sFqHzzIboOoOF6b2FSmERiAhY=\");\n\n_c = FirebaseAuthState;\nexport default FirebaseAuthState;\n\nvar _c;\n\n$RefreshReg$(_c, \"FirebaseAuthState\");","map":{"version":3,"sources":["C:/Users/NicholasJocius/Documents/GitHub/portfolio-magic/bookingapp/client/components/FirebaseAuthState.js"],"names":["React","useEffect","useContext","Fragment","firebase","Context","FirebaseAuthState","children","dispatch","auth","onAuthStateChanged","user","type","payload"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,SAASC,QAAT,QAAyB,WAAzB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,SAASC,OAAT,QAAwB,YAAxB;;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,OAAkB;AAAA;;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAExC;AAFwC,oBAGnBL,UAAU,CAACG,OAAD,CAHS;AAAA,MAGhCG,QAHgC,eAGhCA,QAHgC;;AAKxCP,EAAAA,SAAS,CAAC,YAAM;AACZ;AACA,WAAOG,QAAQ,CAACK,IAAT,GAAgBC,kBAAhB,wEAAmC;AAAA;AAAA;AAAA;AAAA;AACtC,kBAAI,CAACC,IAAL,EAAW;AACPH,gBAAAA,QAAQ,CAAC;AACLI,kBAAAA,IAAI,EAAE;AADD,iBAAD,CAAR;AAGH,eAJD,MAIO;AACHJ,gBAAAA,QAAQ,CAAC;AACLI,kBAAAA,IAAI,EAAE,OADD;AAELC,kBAAAA,OAAO,EAAEF;AAFJ,iBAAD,CAAR;AAIH;;AAVqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAnC,GAAP;AAYH,GAdQ,EAcN,EAdM,CAAT;AAiBA,sBACI,QAAC,QAAD;AAAA,cACKJ;AADL;AAAA;AAAA;AAAA;AAAA,WADJ;AAKH,CA3BD;;GAAMD,iB;;KAAAA,iB;AA6BN,eAAeA,iBAAf","sourcesContent":["import React, { useEffect, useContext } from 'react';\r\nimport { Fragment } from 'react-dom';\r\nimport firebase from '../firebase';\r\nimport { Context } from '../context';\r\n\r\nconst FirebaseAuthState = ({ children }) => {\r\n\r\n    // update state with dispatch\r\n    const { dispatch } = useContext(Context);\r\n\r\n    useEffect(() => {\r\n        // gives logged in users current auth state\r\n        return firebase.auth().onAuthStateChanged(async () => {\r\n            if (!user) {\r\n                dispatch({\r\n                    type: 'LOGOUT',\r\n                });\r\n            } else {\r\n                dispatch({\r\n                    type: 'LOGIN',\r\n                    payload: user,\r\n                });\r\n            }\r\n        });\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <Fragment>\r\n            {children}\r\n        </Fragment>\r\n    );\r\n};\r\n\r\nexport default FirebaseAuthState;\r\n"]},"metadata":{},"sourceType":"module"}